var R=Object.defineProperty;var T=(n,e,t)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var c=(n,e,t)=>(T(n,typeof e!="symbol"?e+"":e,t),t);import{W as C,A as b,D as F,S as P,g as k,h as H}from"./GLTFLoader-CWh8kGrX.js";const d="http://localhost:5173/assets/",W={models:{BlueCube:d+"sad_cube.glb",RedCube:d+"cute_cube_1.obj",LargeFloor:d+"large_square.glb",StickWoman:d+"stick_woman.glb",IrregularFloor:d+"irregular_floor.glb"}};let v,E,g;const p=new C;p.setSize(window.innerWidth,window.innerHeight);const I=p.domElement;let f=0;class L{constructor(e,t){this.name=e,this.file=t,this.model=null,this.velocity=new s(0,0),this.move=function(){const r=this.velocity.angle*(Math.PI/180),o=this.velocity.speed,i=Math.sin(r)*o,a=Math.cos(r)*o*-1;this.model.position.x+=i,this.model.position.z+=a}}}class O extends L{constructor(e,t){super(e,t)}}class s{constructor(e,t){this.speed=e,this.angle=t}}c(s,"UP",0),c(s,"UPRIGHT",45),c(s,"RIGHT",90),c(s,"RIGHTDOWN",135),c(s,"DOWN",180),c(s,"DOWNLEFT",225),c(s,"LEFT",270),c(s,"LEFTUP",315);const l=.5;class S{constructor(){this.scene=new P,this.camera=new k(75,window.innerWidth/window.innerHeight,.1,1e3),this.sceneIsSet=!1,this.sceneContents=[],this.findSceneContentsByName=e=>{for(const t of this.sceneContents)if(t.name===e)return t},this.loadSceneContents=()=>{f=0;let e=0;const t=this.sceneContents.length,r=this.scene;for(const o of this.sceneContents)new H().load(o.file,function(a){const A=a.scene.children[0];A.name=o.name,o.model=A,r.add(A),e+=1,f=e/t*100,console.log("Object Loading Progress: "+f+"%")},void 0,void 0)},this.updateEntityPositions=()=>{},this.run=()=>{f===100?(requestAnimationFrame(this.run),this.sceneIsSet==!1&&(this.sceneIsSet=!0),this.updateEntityPositions(),p.render(E,g)):setTimeout(this.run,100)}}}function _(n){v=n,g=n.camera,E=n.scene,v.loadSceneContents(),v.initControls(),v.run()}class D extends S{constructor(){super(),this.sceneContents=[new O("Hub Floor",W.models.IrregularFloor),new L("Stick Woman",W.models.StickWoman)],this.myAvatar=this.findSceneContentsByName("Stick Woman"),this.scene.add(new b(16711422)),this.scene.add(new F(16777198,.8)),this.camera.position.z=16,this.camera.position.y=6,this.camera.position.x=0,this.camera.rotateX(-.5),this.updateEntityPositions=()=>{this.myAvatar.move()},this.initControls=()=>{const e=r=>{w[r.keyCode]=!0;const o=Object.keys(w);if(o.length===1){const i=o[0];i==h?(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.UP):i==u?(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.RIGHT):i==m?(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.DOWN):i==y&&(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.LEFT)}else if(o.length===2){const i=o[0],a=o[1];(i==h&&a==u||i==u&&a==h)&&(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.UPRIGHT),(i==u&&a==m||i==m&&a==u)&&(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.RIGHTDOWN),(i==m&&a==y||i==y&&a==m)&&(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.DOWNLEFT),(i==y&&a==h||i==h&&a==y)&&(this.myAvatar.velocity.speed=l,this.myAvatar.velocity.angle=s.LEFTUP)}},t=r=>{delete w[r.keyCode],this.myAvatar.velocity.speed=0};document.addEventListener("keydown",e),document.addEventListener("keyup",t)}}}class G extends S{constructor(){super()}}class x extends S{constructor(){super()}}const N=new D;new G;new x;const h=38,m=40,y=37,u=39;window.addEventListener("resize",function(){p.setSize(window.innerWidth,window.innerHeight),g.aspect=window.innerWidth/window.innerHeight,g.updateProjectionMatrix()});const w={};document.body.appendChild(I);_(N);
