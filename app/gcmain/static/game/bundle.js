var P=Object.defineProperty;var x=(n,e,t)=>e in n?P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var c=(n,e,t)=>(x(n,typeof e!="symbol"?e+"":e,t),t);import{W as D,A as E,D as S,S as U,g as G,h as O}from"./GLTFLoader-CWh8kGrX.js";const d="http://localhost:5173/assets/",y={models:{BlueCube:d+"sad_cube.glb",RedCube:d+"cute_cube_1.obj",LargeFloor:d+"large_square.glb",StickWoman:d+"stick_woman.glb",IrregularFloor:d+"irregular_floor.glb"}},B=document.getElementById("canvas_wrapper");let o,T,w;const v=new D;v.setSize(window.innerWidth,window.innerHeight);const K=v.domElement;let f=0;class W{constructor(e,t){this.name=e,this.file=t,this.model=null,this.velocity=new i(0,0),this.move=function(){const s=this.velocity.angle*(Math.PI/180),a=this.velocity.speed,L=Math.sin(s)*a,A=Math.cos(s)*a*-1;this.model.position.x+=L,this.model.position.z+=A}}}class _ extends W{constructor(e,t){super(e,t)}}class i{constructor(e,t){this.speed=e,this.angle=t}}c(i,"UP",0),c(i,"UPRIGHT",45),c(i,"RIGHT",90),c(i,"RIGHTDOWN",135),c(i,"DOWN",180),c(i,"DOWNLEFT",225),c(i,"LEFT",270),c(i,"LEFTUP",315);const r=.5;class k{constructor(){this.scene=new U,this.camera=new G(75,window.innerWidth/window.innerHeight,.1,1e3),this.sceneIsSet=!1,this.sceneContents=[],this.findSceneContentsByName=e=>{for(const t of this.sceneContents)if(t.name===e)return t},this.loadSceneContents=()=>{f=0;let e=0;const t=this.sceneContents.length,s=this.scene;for(const a of this.sceneContents)new O().load(a.file,function(A){const g=A.scene.children[0];g.name=a.name,a.model=g,s.add(g),e+=1,f=e/t*100,console.log("Object Loading Progress: "+f+"%")},void 0,void 0)},this.updateEntityPositions=()=>{},this.frameId=null,this.run=()=>{f===100?(requestAnimationFrame(this.run),this.sceneIsSet==!1&&(this.sceneIsSet=!0),this.updateEntityPositions(),v.render(T,w)):setTimeout(this.run,100)},this.stop=()=>{cancelAnimationFrame(this.frameId)},this.unloadSceneContents=()=>{for(let e of this.sceneContents)this.scene.remove(e.model)}}}function p(n){switch(o&&(o.stop(),o.unloadSceneContents()),n){case"GAME":o=new F;break;case"AVATAR":o=new I;break;case"HUB":o=new H;break}w=o.camera,T=o.scene,o.loadSceneContents(),o.run(),N()}class F extends k{constructor(){super(),this.sceneContents=[new _("Hub Floor",y.models.IrregularFloor),new W("Stick Woman",y.models.StickWoman)],this.myAvatar=this.findSceneContentsByName("Stick Woman"),this.scene.add(new E(16711422)),this.scene.add(new S(16777198,.8)),this.camera.position.z=16,this.camera.position.y=6,this.camera.position.x=0,this.camera.rotateX(-.5),this.updateEntityPositions=()=>{this.myAvatar.move()},this.handleKeyDown=e=>{const t=Object.keys(b);if(t.length===1){const s=t[0];s==l?(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.UP):s==u?(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.RIGHT):s==h?(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.DOWN):s==m&&(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.LEFT)}else if(t.length===2){const s=t[0],a=t[1];(s==l&&a==u||s==u&&a==l)&&(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.UPRIGHT),(s==u&&a==h||s==h&&a==u)&&(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.RIGHTDOWN),(s==h&&a==m||s==m&&a==h)&&(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.DOWNLEFT),(s==m&&a==l||s==l&&a==m)&&(this.myAvatar.velocity.speed=r,this.myAvatar.velocity.angle=i.LEFTUP)}},this.handleKeyUp=e=>{this.myAvatar.velocity.speed=0}}}class I extends k{constructor(){super(),this.sceneContents=[new W("Stick Woman",y.models.StickWoman)],this.scene.add(new E(16711422)),this.scene.add(new S(16777198,.8)),this.camera.position.z=16,this.camera.position.y=6,this.camera.position.x=0,this.camera.rotateX(-.5)}}class H extends k{constructor(){super(),this.sceneContents=[new _("Large Floor",y.models.LargeFloor)],this.scene.add(new E(16711422)),this.scene.add(new S(16777198,.8))}}new F;new I;new H;const l=38,h=40,m=37,u=39,b={};function C(n){b[n.keyCode]=!0,o&&o.handleKeyDown&&o.handleKeyDown(n)}function R(n){delete b[n.keyCode],o&&o.handleKeyUp&&o.handleKeyUp(n)}function N(){window.removeEventListener("keydown",C),window.removeEventListener("keyup",R),window.addEventListener("keydown",C),window.addEventListener("keyup",R)}window.addEventListener("resize",function(){v.setSize(window.innerWidth,window.innerHeight),w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix()});B.appendChild(K);p("GAME");const M=document.getElementById("main_screen_button"),z=document.getElementById("avatar_edit_button"),j=document.getElementById("hub_edit_button");M.onclick=function(){p("GAME")};z.onclick=function(){p("AVATAR")};j.onclick=function(){p("HUB")};
