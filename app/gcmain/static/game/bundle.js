var T=Object.defineProperty;var F=(n,e,t)=>e in n?T(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>(F(n,typeof e!="symbol"?e+"":e,t),t);import{W as I,A as W,D as b,S as P,g as H,h as x}from"./GLTFLoader-CWh8kGrX.js";const l="http://localhost:5173/assets/",g={models:{BlueCube:l+"sad_cube.glb",RedCube:l+"cute_cube_1.obj",LargeFloor:l+"large_square.glb",StickWoman:l+"stick_woman.glb",IrregularFloor:l+"irregular_floor.glb"}},O=document.getElementById("canvas_wrapper");let f,_,p;const w=new I;w.setSize(window.innerWidth,window.innerHeight);const D=w.domElement;let y=0;class B{constructor(e,t){this.name=e,this.domElement=document.createElement("div"),this.domElement.innerHTML=t,this.attach=c=>{c.appendChild(this.domElement)},this.detach=()=>{this.domElement.remove()}}}new B("avatar_editor_link",`<button onclick="console.log('avatar edit button was clicked!');">Edit Avatar</button>`);class k{constructor(e,t){this.name=e,this.file=t,this.model=null,this.velocity=new s(0,0),this.move=function(){const c=this.velocity.angle*(Math.PI/180),o=this.velocity.speed,i=Math.sin(c)*o,a=Math.cos(c)*o*-1;this.model.position.x+=i,this.model.position.z+=a}}}class C extends k{constructor(e,t){super(e,t)}}class s{constructor(e,t){this.speed=e,this.angle=t}}r(s,"UP",0),r(s,"UPRIGHT",45),r(s,"RIGHT",90),r(s,"RIGHTDOWN",135),r(s,"DOWN",180),r(s,"DOWNLEFT",225),r(s,"LEFT",270),r(s,"LEFTUP",315);const d=.5;class L{constructor(){this.scene=new P,this.camera=new H(75,window.innerWidth/window.innerHeight,.1,1e3),this.sceneIsSet=!1,this.sceneContents=[],this.findSceneContentsByName=e=>{for(const t of this.sceneContents)if(t.name===e)return t},this.loadSceneContents=()=>{y=0;let e=0;const t=this.sceneContents.length,c=this.scene;for(const o of this.sceneContents)new x().load(o.file,function(a){const A=a.scene.children[0];A.name=o.name,o.model=A,c.add(A),e+=1,y=e/t*100,console.log("Object Loading Progress: "+y+"%")},void 0,void 0)},this.updateEntityPositions=()=>{},this.run=()=>{y===100?(requestAnimationFrame(this.run),this.sceneIsSet==!1&&(this.sceneIsSet=!0),this.updateEntityPositions(),w.render(_,p)):setTimeout(this.run,100)},this.initControls=()=>{}}}function E(n){f=n,p=n.camera,_=n.scene,f.loadSceneContents(),f.initControls(),f.run()}class G extends L{constructor(){super(),this.sceneContents=[new C("Hub Floor",g.models.IrregularFloor),new k("Stick Woman",g.models.StickWoman)],this.myAvatar=this.findSceneContentsByName("Stick Woman"),this.scene.add(new W(16711422)),this.scene.add(new b(16777198,.8)),this.camera.position.z=16,this.camera.position.y=6,this.camera.position.x=0,this.camera.rotateX(-.5),this.updateEntityPositions=()=>{this.myAvatar.move()},this.initControls=()=>{const e=c=>{S[c.keyCode]=!0;const o=Object.keys(S);if(o.length===1){const i=o[0];i==h?(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.UP):i==v?(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.RIGHT):i==m?(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.DOWN):i==u&&(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.LEFT)}else if(o.length===2){const i=o[0],a=o[1];(i==h&&a==v||i==v&&a==h)&&(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.UPRIGHT),(i==v&&a==m||i==m&&a==v)&&(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.RIGHTDOWN),(i==m&&a==u||i==u&&a==m)&&(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.DOWNLEFT),(i==u&&a==h||i==h&&a==u)&&(this.myAvatar.velocity.speed=d,this.myAvatar.velocity.angle=s.LEFTUP)}},t=c=>{delete S[c.keyCode],this.myAvatar.velocity.speed=0};document.addEventListener("keydown",e),document.addEventListener("keyup",t)}}}class U extends L{constructor(){super(),this.sceneContents=[new k("Stick Woman",g.models.StickWoman)],this.scene.add(new W(16711422)),this.scene.add(new b(16777198,.8))}}class N extends L{constructor(){super(),this.sceneContents=[new C("Large Floor",g.models.LargeFloor)],this.scene.add(new W(16711422)),this.scene.add(new b(16777198,.8))}}const R=new G,z=new U,M=new N,h=38,m=40,u=37,v=39;window.addEventListener("resize",function(){w.setSize(window.innerWidth,window.innerHeight),p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix()});const S={};O.appendChild(D);E(R);const j=document.getElementById("main_screen_button"),K=document.getElementById("avatar_edit_button"),q=document.getElementById("hub_edit_button");j.onclick=function(){E(R)};K.onclick=function(){E(z)};q.onclick=function(){E(M)};
